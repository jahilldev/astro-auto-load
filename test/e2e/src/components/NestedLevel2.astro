---
import { getLoaderData } from 'astro-auto-load/runtime';
import NestedLevel3 from './NestedLevel3.astro';

export async function loader () {
  const start = Date.now();
  await new Promise((resolve) => setTimeout(resolve, 30));
  return { start, duration: Date.now() - start };
};

const data = await getLoaderData<typeof loader>();
---

<div class="nested-level2" data-start={data.start} data-duration={data.duration}>
  <h4>Nested Level 2: loaded in {data.duration}ms</h4>
  <NestedLevel3 />
</div>
