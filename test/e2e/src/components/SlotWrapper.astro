---
import { getLoaderData } from 'astro-auto-load/runtime';
import SlotParent from './SlotParent.astro';
import SlotChild1 from './SlotChild1.astro';
import SlotChild2 from './SlotChild2.astro';
import SlotGrandchild from './SlotGrandchild.astro';

export const loader = async () => {
  const start = Date.now();
  await new Promise((resolve) => setTimeout(resolve, 50));
  const duration = Date.now() - start;
  return { component: 'SlotWrapper', start, duration };
};

const data = await getLoaderData<typeof loader>();
---

<div class="slot-wrapper" data-start={data.start} data-duration={data.duration}>
  <h2>Slot Wrapper (imports all nested components, took {data.duration}ms)</h2>
  <SlotParent>
    <SlotChild1>
      <SlotChild2>
        <SlotGrandchild />
      </SlotChild2>
    </SlotChild1>
  </SlotParent>
</div>
