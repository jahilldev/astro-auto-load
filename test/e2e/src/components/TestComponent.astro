---
// Reusable component with loader - can be used in any test
// Props: name, className
// Always uses 50ms delay (use TestComponent100 for 100ms, TestComponent30 for 30ms)
import { getLoaderData } from 'astro-auto-load/runtime';

const { name = 'Component', className = 'test-component' } = Astro.props;

export const loader = async () => {
  const start = Date.now();
  await new Promise((resolve) => setTimeout(resolve, 50));
  return { start, duration: Date.now() - start };
};

const data = await getLoaderData<typeof loader>();
---

<div class={className} data-component={name.toLowerCase()} data-start={data.start} data-duration={data.duration}>
  <p>{name}: loaded in {data.duration}ms</p>
  <slot />
</div>
